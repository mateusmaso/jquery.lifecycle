// jquery.lifecycle
// ----------------
// v0.1.0
//
// Copyright (c) 2013-2014 Mateus Maso
// Distributed under MIT license
//
// http://github.com/mateusmaso/jquery.lifecycle

!function(a,b){if("undefined"!=typeof exports){var c=global.MutationObserver||global.WebKitMutationObserver||global.MozMutationObserver;"undefined"!=typeof module&&module.exports&&(module.exports=b(global.$,c)),exports=b(global.$,c)}else b(a.$,a.MutationObserver||a.WebKitMutationObserver||a.MozMutationObserver)}(this,function(a,b){var c=function(b){var c=a(b).find("[lifecycle]").toArray();return a(b).is("[lifecycle]")&&c.push(b),c},d=function(c,d){var e=new b(function(b){a.each(b,function(a,b){var e=c.attributes[b.attributeName];d.apply(c,[b.attributeName,e?e.value:void 0])})});return e.observe(c,{subtree:!1,attributes:!0}),e},e=new b(function(b){a.each(b,function(b,d){"childList"===d.type&&(a.each(d.addedNodes,function(b,d){a.each(c(d),function(b,c){a.each(c.whenInsert||[],function(a,b){b.apply(c)})})}),a.each(d.removedNodes,function(b,d){a.each(c(d),function(b,c){a.each(c.whenRemove||[],function(a,b){b.apply(c)})})}))})});a(function(){e.observe(document.body,{childList:!0,subtree:!0})}),a.fn.lifecycle=function(b){var c=a(this).get(0);c.whenInsert=c.whenInsert||[],c.whenRemove=c.whenRemove||[],c.whenChange=c.whenChange||[],b=b||{},b.insert&&c.whenInsert.push(b.insert),b.remove&&c.whenRemove.push(b.remove),b.change&&c.whenChange.push(d(c,b.change)),a(this).attr("lifecycle","")},a.fn.unlifecycle=function(){var b=a(this).get(0);a.each(b.whenChange,function(a,b){b.disconnect()}),delete b.whenInsert,delete b.whenRemove,delete b.whenChange,a(this).removeAttr("lifecycle")}});