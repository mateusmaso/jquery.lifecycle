// jquery.lifecycle
// ----------------
// v0.1.2
//
// Copyright (c) 2013-2015 Mateus Maso
// Distributed under MIT license
//
// http://github.com/mateusmaso/jquery.lifecycle

!function(a,b){if("undefined"!=typeof exports){var c=global.MutationObserver||global.WebKitMutationObserver||global.MozMutationObserver;"undefined"!=typeof module&&module.exports&&(module.exports=b(global.$,c)),exports=b(global.$,c)}else b(a.$,a.MutationObserver||a.WebKitMutationObserver||a.MozMutationObserver)}(this,function(a,b){var b=window.MutationObserver||window.WebKitMutationObserver,c=function(b){var c=a(b).find("[lifecycle]").toArray();return a(b).is("[lifecycle]")&&c.push(b),c},d=function(c,d){var e=new b(function(b){a.each(b,function(a,b){var e=c.attributes[b.attributeName];e&&e.value==b.oldValue||d.apply(c,[b.attributeName,e?e.value:void 0])})});return e.observe(c,{subtree:!1,attributes:!0,attributeOldValue:!0}),e},e=function(c,d){var e=new b(function(b){a.each(b,function(b,e){"childList"===e.type&&a.each(e.addedNodes,function(a,b){d.apply(c,[b])})})});return e.observe(c,{childList:!0,subtree:!0}),e},f=new b(function(b){a.each(b,function(b,d){"childList"===d.type&&(a.each(d.addedNodes,function(b,d){a.each(c(d),function(b,c){a.each(c.whenInsert||[],function(a,b){c.inserted||b.apply(c)}),c.inserted=!0})}),a.each(d.removedNodes,function(b,d){a.each(c(d),function(b,c){a.each(c.whenRemove||[],function(a,b){c.inserted&&b.apply(c)}),c.inserted=!1})}))})});a(function(){f.observe(document.body,{childList:!0,subtree:!0})}),a.fn.lifecycle=function(b){return this.each(function(){var c=a(this)[0];c.inserted=!1,c.whenInsert=c.whenInsert||[],c.whenRemove=c.whenRemove||[],c.whenChange=c.whenChange||[],c.whenSubtreeChange=c.whenSubtreeChange||[],b=b||{},b.insert&&c.whenInsert.push(b.insert),b.remove&&c.whenRemove.push(b.remove),b.change&&c.whenChange.push(d(c,b.change)),b.subtreeChange&&c.whenSubtreeChange.push(e(c,b.subtreeChange)),a(this).attr("lifecycle","")})},a.fn.unlifecycle=function(){return this.each(function(){var b=a(this)[0];a.each(b.whenChange,function(a,b){b.disconnect()}),a.each(b.whenSubtreeChange,function(a,b){b.disconnect()}),delete b.inserted,delete b.whenInsert,delete b.whenRemove,delete b.whenChange,a(this).removeAttr("lifecycle")})}});